/**
 * @copyright AI428
 * @description for scoped style in JS
 * @license http://opensource.org/licenses/MIT
 * @namespace Mist
 * @version 0.3.0
 */
function mist(t){return Mist.Component.create(Mist.Statement,t)}var Mist;!function(t){function n(t){return JSON.stringify(t.map(function(t){return t instanceof Object?t.sessions||(t.sessions=i++):t}))}var e=function(){function t(){}return t.create=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=n([t]),o=n(e);return this.responses[r]||(this.responses[r]={}),this.responses[r][o]||(this.responses[r][o]=new(t.bind.apply(t,[t].concat([].slice.apply(e))))),this.responses[r][o]},t.responses={},t}();t.Component=e;var i=0}(Mist||(Mist={}));var Mist;!function(t){var n=function(){function t(t){var n=this.succeed,e=this.erred;this.resume(),t(n.bind(this),e.bind(this))}return t.all=function(n){return new t(function(t,e){function i(n){if(o.push(n)>r){try{t(o)}catch(i){e(i)}o=[]}}var r,o=[];n.map(function(t,n){t.then(i),r=n})})},t.race=function(n){return new t(function(t,e){n.forEach(function(n){n.then(function(n){try{t(n)}catch(i){e(i)}})})})},t.prototype["catch"]=function(n){var e=this;return new t(function(t,i){e.err=function(e){try{t(n(e))}catch(r){i(r)}},e.tx()})},t.prototype.resume=function(){this.txd=null,this.txr=null},t.prototype.then=function(n,e){var i=this;return new t(function(t,r){i.err=r,i.success=function(i){try{t(n(i))}catch(o){e?t(e(o)):r(o)}},i.tx()})},t.prototype.when=function(t,n){var e=this,i=function(n){var i=t(n);return e.resume(),i},r=n?function(t){var i=n(t);return e.resume(),i}:n;return this.then(i,r)},t.prototype.erred=function(t){var n=this;if(!this.txd){var e=this.err;e?(this.txd=!0,t instanceof Object&&t.then?t.then(e):e(t)):this.txr=function(){n.erred(t)}}},t.prototype.succeed=function(t){var n=this;if(!this.txd){var e=this.success;e?(this.txd=!0,t instanceof Object&&t.then?t.then(e):e(t)):this.txr=function(){n.succeed(t)}}},t.prototype.tx=function(){var t;(t=this.txr)&&t()},t}();t.Promise=n}(Mist||(Mist={}));var Mist;!function(t){var n=function(){function n(){}return n.at=function(t,n){void 0===n&&(n=0);var e=[];e.push(n),e.push(t),this.txs.push(e),this.tx()},n.on=function(n,e){var i=this;return void 0===e&&(e=0),new t.Promise(function(t,r){var o=[];o.push(e),o.push(function(){try{t(n())}catch(e){r(e)}}),i.txs.push(o),i.tx()})},n.tx=function(){var t=this;this.txd||function(){t.txd=!0;var n;(n=function(){for(var e,i=[];e=t.txs.pop();)e[0]--<0?e[1]():i.push(e);t.txs.push.apply(t.txs,i)?requestAnimationFrame(n):t.txd=!1})()}()},n.txs=[],n}();t.Frame=n}(Mist||(Mist={}));var __extends=this&&this.__extends||function(t,n){function e(){this.constructor=t}for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)},Mist;!function(t){var n=function(n){function e(e){var i=this;this.composite=e,this.xs=[],n.call(this,function(n,e){i.xr=function(){i.xd||function(){i.xd=!0,t.Frame.at(function(){var t;try{n(i.composite)}catch(r){e(r)}for(;t=i.xs.pop();)t(i.composite);i.xd=!1})}()}})}return __extends(e,n),e.prototype.compose=function(n){var e=this;return new t.Promise(function(i){t.Frame.at(function(){e.composite=n(e.composite),e.xs.push(i),e.xr()})})},e}(t.Promise);t.Value=n}(Mist||(Mist={}));var Mist;!function(t){var n;!function(t){t[t.a=0]="a",t[t.r=1]="r",t[t.t=2]="t"}(n||(n={}));var e=function(){function e(e){this.statement=e,this.value=new t.Value({}),this.value.when(function(t){var i=[];for(var r in t){var o=t[r];i[o]||(i[o]=[]),i[o].push(r),delete t[r]}e.each(function(t){var e,r=t.classList;!(e=i[n.a])||r.add.apply(r,e),!(e=i[n.r])||r.remove.apply(r,e),!(e=i[n.t])||e.forEach(function(t){r.toggle(t)})})})}return e.prototype.add=function(e,i){var r=this;return void 0===i&&(i=0),new t.Promise(function(o){var s=r.value.compose(function(t){return e.forEach(function(e){t[e]=n.a}),t});i>0?t.Frame.on(r.remove.bind(r,e),i).then(o):s.then(o)})},e.prototype.remove=function(e,i){var r=this;return void 0===i&&(i=0),new t.Promise(function(o){var s=r.value.compose(function(t){return e.forEach(function(e){t[e]=n.r}),t});i>0?t.Frame.on(r.add.bind(r,e),i).then(o):s.then(o)})},e.prototype.toggle=function(t){return this.value.compose(function(e){return t.forEach(function(t){switch(e[t]){case n.a:e[t]=n.r;break;case n.r:e[t]=n.a;break;case n.t:delete e[t];break;default:e[t]=n.t}}),e})},e}();t.Class=e}(Mist||(Mist={}));var Mist;!function(t){var n=function(){function t(t){this.statement=t,this.emits={},this.obss={}}return t.customize=function(t,n){void 0===n&&(n={});var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,n.bubbles||!0,n.cancelable||!0,n.detail),e},t.prototype.add=function(t,n){this.obss[t]||(this.obss[t]=[]),this.obss[t].push(n),this.ready(t)},t.prototype.emit=function(t,n){for(var e in this.obss[t])this.obss[t][e](n)},t.prototype.remove=function(t,n){function e(){var t=i.indexOf(n);0>t||i.splice(t,1)}var i=this.obss[t];i&&n?e():i=null},t.prototype.ready=function(t){var n=this,e=this.emits;e[t]||document.addEventListener(t,e[t]=function(e){var i=e.target;i instanceof Element&&i.closest(n.statement.selector())&&n.emit(t,e instanceof CustomEvent?e.detail:e)})},t}();t.Emitter=n}(Mist||(Mist={})),function(t){t.matches=t.matches||t.mozMatchesSelector||t.msMatchesSelector||t.webkitMatchesSelector}(Element.prototype),function(t){t.closest=t.closest||function(t){for(var n=this;n&&!n.matches(t);)n=n.parentElement;return n}}(Element.prototype);var Mist;!function(t){var n=function(t){function n(n,e){t.call(this,function(t,i){n.add(e,function(n){try{t(n)}catch(e){i(e)}})}),this.emitter=n,this.name=e}return __extends(n,t),n}(t.Promise);t.Emission=n}(Mist||(Mist={}));var Mist;!function(t){function n(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}var e=function(){function e(e){var i=this;this.statement=e,this.value=new t.Value([{}]),this.value.when(function(t){var r=t.map(function(t){var i=[];for(var r in t)i.push(n(r)+":"+t[r]);return e.selector()+"{"+i.join(";")+"}"});i.create().innerHTML=r.join("")})}return e.prototype.add=function(n,e){var i=this;return void 0===e&&(e=0),new t.Promise(function(r){var o=i.value.compose(function(o){var s=e>0?{}:o[0];for(var c in n)n[c]instanceof t.Promise?n[c].when(function(t){var n={};n[c]=t,i.add(n,e)}):s[c]=n[c];if(e>0){o.push(s);var u=t.Frame.on(function(){return i.value.compose(function(t){var n=t.indexOf(s);return 0>n||t.splice(n,1),t})},e);u.then(r)}return o});e>0||o.then(r)})},e.prototype.get=function(){var t={};return this.value.composite.forEach(function(n){for(var e in n)t[e]=n[e]}),t},e.prototype.set=function(t){return this.value.compose(function(){var n={};for(var e in t)n[e]=t[e];return[n]})},e.prototype.create=function(){if(!this.e){var t=document.createElement("style"),n=document.createTextNode("");t.appendChild(n),document.head.appendChild(t),this.e=t}return this.e},e}();t.Style=e}(Mist||(Mist={}));var Mist;!function(t){var n;!function(n){function e(t,n){var e,i=0,r=0;switch(t.type){case"mousedown":case"mousemove":case"mouseout":case"mouseup":e=t,n&&(i=e.pageX-n.pageX,r=e.pageY-n.pageY);break;case"touchcancel":case"touchend":case"touchleave":case"touchmove":case"touchstart":if(e=t.changedTouches[0],n){var o=n.changedTouches[0];i=e.pageX-o.pageX,r=e.pageY-o.pageY}}return{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,src:t,target:e.target,transX:i,transY:r}}var i=function(){function n(i){this.emitter=i;var r,o=!1;!function(){function n(t){i.emit("panstart",e(t)),o=!0,r=t}new t.Emission(i,"mousedown").when(n),new t.Emission(i,"touchstart").when(function(t){return t.preventDefault(),t}).when(n)}(),function(){function s(t){if(o){var s=e(t,r);n.err<Math.sqrt(s.transX*s.transX+s.transY*s.transY)&&(i.emit("panmove",s),s.transX<0&&i.emit("panleft",s),s.transX>0&&i.emit("panright",s),s.transY<0&&i.emit("panup",s),s.transY>0&&i.emit("pandown",s),r=t)}}new t.Emission(i,"mousemove").when(s),new t.Emission(i,"touchmove").when(function(t){return t.preventDefault(),t}).when(s)}(),function(){function n(t){o&&(i.emit("panleave",e(t)),o=!1,r=t)}new t.Emission(i,"mouseout").when(n),new t.Emission(i,"touchleave").when(function(t){return t.preventDefault(),t}).when(n)}(),function(){function n(t){i.emit("panend",e(t)),o=!1,r=t}new t.Emission(i,"mouseup").when(n),new t.Emission(i,"touchcancel").when(n),new t.Emission(i,"touchend").when(function(t){return t.preventDefault(),t}).when(n)}()}return n.err=2,n}();n.Pan=i}(n=t.Recognizer||(t.Recognizer={}))}(Mist||(Mist={}));var Mist;!function(t){var n;!function(n){var e=function(){function n(n){this.emitter=n,new t.Emission(n,"panend").when(function(t){n.emit("tap",t)})}return n}();n.Tap=e}(n=t.Recognizer||(t.Recognizer={}))}(Mist||(Mist={}));var Mist;!function(t){function n(t){return t.id?"#"+t.id:function(){var n;return t.hasAttribute("mid")&&(n='[mid="'+t.getAttribute("mid")+'"]'),n}()||function(){var n=i++;return t.setAttribute("mid",n),'[mid="'+n+'"]'}()}var e=function(){function e(n){this.statement=n,this["class"]=new t.Class(this),this.emitter=new t.Emitter(this),this.style=new t.Style(this),new t.Recognizer.Pan(this.emitter),new t.Recognizer.Tap(this.emitter)}return e.prototype.concat=function(n){var i=this.selector(),r=i.split(",").map(function(t){return t.trim()+n});return t.Component.create(e,r.join())},e.prototype.each=function(t){this.elements().forEach(t)},e.prototype.elements=function(){var t,n=this.statement;return t=n instanceof HTMLElement?[n]:n instanceof e?n.elements():[].map.call(document.querySelectorAll(n),function(t){return t})},e.prototype.on=function(n){return new t.Emission(this.emitter,n)},e.prototype.once=function(n){return t.Component.create(t.Emission,this.emitter,n)},e.prototype.selector=function(){var t,i=this.statement;return t=i instanceof HTMLElement?n(i):i instanceof e?i.selector():i},e}();t.Statement=e;var i=0}(Mist||(Mist={}));