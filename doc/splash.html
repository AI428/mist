<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <title>MIST, Motion Design in Modular CSS</title>
    <style>
        body {
            overflow: hidden;
        }

        main {
            left: 50%;
            position: absolute;
            top: 50%;
            transform: translate3d(-50%, -50%, 0);
        }

        main> div {
            background: transparent;
            border-radius: 50%;
            height: 4em;
            margin: -2em 0 0 -2em;
            position: absolute;
            width: 4em;
        }
    </style>
</head>

<body>
    <main>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </main>
    <script src='icon.js'></script>
    <script src='../dist/mist.js'></script>
    <script>
        window.addEventListener('load', function() {

            var nodes = document.querySelectorAll('main> div');

            var l = nodes.length;

            var i = 0;
            var s = 1000;

            // modular

            var css = {

                background: function() {

                    // vivid color

                    return 'hsl(' + (Math.random() * 360).toFixed(0) + ', 66%, 66%)';
                },

                transform: function() {

                    var r = (Math.PI * 2 / l) * i;

                    var n = Math.random() * 16;

                    // random position

                    var y = (Math.sin(r) * n).toFixed(2);
                    var x = (Math.cos(r) * n).toFixed(2);

                    return 'translate3d(' + x + 'em, ' + y + 'em, 0) scale(0)';
                },

                transition: function() {

                    return (Math.random() * 2) + 's cubic-bezier(0.175, 0.885, 0.32, 1.275)';
                }
            };

            (function responsor() {

                var e = nodes[i++] || nodes[(i = 0)];

                // motion

                if (e) mist(e).set(css).time(s).clear();

                setTimeout(responsor, s / l);
            })();
        });
    </script>
</body>

</html>
