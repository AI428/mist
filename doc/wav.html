<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <title>MIST, Motion Design in Modular CSS</title>
    <style>
        main {
            left: 50%;
            position: absolute;
            top: 50%;
            transform: translate3d(-50%, -50%, 0);
        }

        .wav> div {
            float: left;
            height: 4em;
            overflow: hidden;
            width: .5em;
        }

        .wav> div> i {
            bottom: 0;
            position: absolute;
            width: .5em;
        }

        .wav> div> i:before {
            background: inherit;
            content: '';
            height: 1px;
            position: absolute;
            width: 100%;
        }
    </style>
</head>

<body>
    <main class='wav'>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
    </main>
    <script src='icon.js'></script>
    <script src='../dist/mist.js'></script>
    <script>
        window.addEventListener('load', function() {

            var S = 500;
            var T = 5;

            var A = S / T;
            var R = S;

            var Y = (function() {

                var n = document.querySelector('.wav> div');
                var r = n.getBoundingClientRect();

                return r.height;
            })();

            /**
             * @param {} e
             */
            function sat(e) {

                var r = e.getBoundingClientRect();
                var h = r.height;

                return ((h / Y) * 100).toFixed(2);
            }

            /**
             * @param {} e
             * @param {} h
             * @param {} l
             */
            function topper(e, h, l) {

                // for pseudo

                mist(e).any(':before').set({

                    bottom: h + 'px',
                    transition: 0

                }).time(A).set({

                    bottom: l + 'px',
                    transition: R + 'ms steps(' + h + ')'
                });
            }

            (function responsor() {

                mist('.wav> div> i').setAll({

                    height: function() {

                        // long response

                        return (Math.random() * 100).toFixed(2) + '%';
                    },

                    transition: A + 'ms cubic-bezier(0.95, 0.05, 0.795, 0.035)'

                }).time(A).setAll({

                    background: function(e, i) {

                        // vivid color

                        return 'hsl(' + i + ', ' + sat(e) + '%, 66%)';
                    },

                    height: function(e) {

                        var r = e.getBoundingClientRect();
                        var h = r.height.toFixed(0);
                        var l = h / T;

                        // for pseudo

                        topper(e, h, l);

                        // short response

                        return l + 'px';
                    },

                    transition: R + 'ms'
                });

                setTimeout(responsor, S);
            })();
        });
    </script>
</body>

</html>
