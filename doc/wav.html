<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <title>MIST, Motion Design in Modular CSS</title>
    <style>
        main {
            left: 50%;
            position: absolute;
            top: 50%;
            transform: translate3d(-50%, -50%, 0);
        }

        .wav> div {
            float: left;
            height: 4em;
            width: .5em;
        }

        .wav> div> i {
            bottom: 0;
            position: absolute;
            width: .5em;
        }

        .wav> div> i:before {
            background: inherit;
            content: '';
            height: 1px;
            position: absolute;
            width: 100%;
        }
    </style>
</head>

<body>
    <main class='wav'>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
        <div><i></i></div>
    </main>
    <script src='../dist/mist.js'></script>
    <script>
        window.addEventListener('load', function() {

            var m = document.querySelector('.wav> div').getBoundingClientRect().height;

            var s = 500;
            var t = 5;

            // timing

            var a = s / t;
            var r = s;

            (function responsor() {

                mist('.wav> div> i').setAll({

                    height: function() {

                        return (Math.random() * 100).toFixed(2) + '%';
                    },

                    transition: a + 'ms cubic-bezier(0.95, 0.05, 0.795, 0.035)'

                }).time(a).setAll({

                    background: function(e, i) {

                        // random color

                        return 'hsl(' + i + ', ' + ((e.getBoundingClientRect().height / m) * 100).toFixed(2) + '%, 66%)';
                    },

                    height: function(e) {

                        var h = e.getBoundingClientRect().height.toFixed(0);
                        var l = h / t;

                        // for pseudo

                        mist(e).any(':before').set({

                            bottom: h + 'px',
                            transition: 0

                        }).time(a).set({

                            bottom: l + 'px',
                            transition: r + 'ms steps(' + h + ')'
                        });

                        // low response

                        return l + 'px';
                    },

                    transition: r + 'ms'
                });

                setTimeout(responsor, s);
            })();
        });
    </script>
</body>

</html>
