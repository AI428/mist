/**
 * @copyright AI428
 * @description Reactive CSS framework
 * @license http://opensource.org/licenses/MIT
 * @namespace Mist
 * @version 0.4.3
 */
function mist(t){return Mist.Component.create(Mist.Statement,t)}var Mist;!function(t){function e(t){return JSON.stringify(t.map(function(t){return t instanceof Object?t.sessions||(t.sessions=i++):t}))}var n=function(){function t(){}return t.create=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=e([t]),o=e(n);return this.responses[r]||(this.responses[r]={}),this.responses[r][o]||(this.responses[r][o]=new(t.bind.apply(t,[t].concat([].slice.apply(n))))),this.responses[r][o]},t.responses={},t}();t.Component=n;var i=0}(Mist||(Mist={}));var Mist;!function(t){var e=function(){function t(t){var e=this.succeed,n=this.erred;this.resume(),t(e.bind(this),n.bind(this))}return t.all=function(e){return new t(function(t,n){function i(e){if(o.push(e)>r){try{t(o)}catch(i){n(i)}o=[]}}var r,o=[];e.map(function(t,e){t.when(i),r=e})})},t.race=function(e){return new t(function(t,n){e.forEach(function(e){e.when(function(e){try{t(e)}catch(i){n(i)}})})})},t.prototype["catch"]=function(e){var n=this;return new t(function(t,i){n.err=function(n){try{t(e(n))}catch(r){i(r)}},n.tx()})},t.prototype.resume=function(){this.txg=null,this.txr=null},t.prototype.then=function(e,n){var i=this;return new t(function(t,r){i.err=r,i.success=function(i){try{t(e(i))}catch(o){n?t(n(o)):r(o)}},i.tx()})},t.prototype.when=function(t,e){var n=this,i=function(e){var i=t(e);return n.resume(),i},r=e?function(t){var i=e(t);return n.resume(),i}:e;return this.then(i,r)},t.prototype.erred=function(e){var n=this;if(!this.txg){var i=this.err;i?(this.txg=!0,e instanceof t?e.then(i):i(e)):this.txr=function(){n.erred(e)}}},t.prototype.succeed=function(e){var n=this;if(!this.txg){var i=this.success;i?(this.txg=!0,e instanceof t?e.then(i):i(e)):this.txr=function(){n.succeed(e)}}},t.prototype.tx=function(){var t;(t=this.txr)&&t()},t}();t.Promise=e}(Mist||(Mist={}));var Mist;!function(t){var e=function(){function e(){}return e.at=function(t,e){void 0===e&&(e=0),this.txs.push(function(){var n=0>e--;return n&&t(),n}),this.tx()},e.fps=function(t){this.mspf=1e3/t},e.on=function(e,n){var i=this;return void 0===n&&(n=0),new t.Promise(function(t,r){i.txs.push(function(){var i=0>n--;if(i)try{t(e())}catch(o){r(o)}return i}),i.tx()})},e.request=function(t){var e=this,n=Date.now();n-e.times>e.mspf?e.times=n:t=e.request.bind(e,t),requestAnimationFrame(t)},e.tx=function(){var t=this;this.txg||function(){t.txg=!0;var e=t;!function n(){for(var t,i=[];t=e.txs.pop();)t()||i.push(t);(e.txg=e.txs.push.apply(e.txs,i)>0)&&e.request(n)}()}()},e.txs=[],e.mspf=1e3/120,e.times=0,e}();t.Frame=e}(Mist||(Mist={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Mist;!function(t){var e=function(e){function n(n){var i=this;e.call(this,function(e,r){i.composite=n,i.xs=[],i.xr=function(){i.xg||function(){i.xg=!0,t.Frame.at(function(){var t;try{e(i.composite)}catch(n){r(n)}for(;t=i.xs.pop();)t(i.composite);i.xg=!1})}()}})}return __extends(n,e),n.prototype.compose=function(e){var n=this;return new t.Promise(function(i){t.Frame.at(function(){n.composite=e(n.composite),n.xs.push(i),n.xr()})})},n}(t.Promise);t.Value=e}(Mist||(Mist={}));var Mist;!function(t){var e=1,n=2,i=3,r=4,o=5,s=function(){function s(s){this.statement=s,this.value=new t.Value({}),this.value.when(function(t){var c=[];for(var a in t){var u=t[a];c[u]||(c[u]=[]),c[u].push(a),delete t[a]}var p=[];s.each(function(t){var a=t.classList;c.map(function(c,u){switch(u){case e:a.add.apply(a,c);break;case n:a.remove.apply(a,c);break;case i:c.forEach(function(t){a.toggle(t)});break;case r:var f=(t.nextElementSibling||s.first()).classList;c=c.filter(function(t){var e=a.contains(t);return e&&a.remove(t),e}),c.length&&p.push(function(){f.add.apply(f,c)});break;case o:var f=(t.previousElementSibling||s.last()).classList;c=c.filter(function(t){var e=a.contains(t);return e&&a.remove(t),e}),c.length&&p.push(function(){f.add.apply(f,c)})}})}),p.forEach(function(t){t()})})}return s.prototype.add=function(n,i){var r=this;return void 0===i&&(i=0),new t.Promise(function(o){var s=r.value.compose(function(t){return n.forEach(function(n){t[n]=e}),t});i>0?t.Frame.on(r.remove.bind(r,n),i).then(o):s.then(o)})},s.prototype.next=function(t){return this.value.compose(function(e){return t.forEach(function(t){e[t]=r}),e})},s.prototype.prev=function(t){return this.value.compose(function(e){return t.forEach(function(t){e[t]=o}),e})},s.prototype.remove=function(e,i){var r=this;return void 0===i&&(i=0),new t.Promise(function(o){var s=r.value.compose(function(t){return e.forEach(function(e){t[e]=n}),t});i>0?t.Frame.on(r.add.bind(r,e),i).then(o):s.then(o)})},s.prototype.toggle=function(t){return this.value.compose(function(r){return t.forEach(function(t){switch(r[t]){case e:r[t]=n;break;case n:r[t]=e;break;case i:delete r[t];break;default:r[t]=i}}),r})},s}();t.Class=s}(Mist||(Mist={})),function(){var t=Element.prototype;t.matches=t.matches||t.mozMatchesSelector||t.msMatchesSelector||t.webkitMatchesSelector}(),function(){var t=Element.prototype;t.closest=t.closest||function(t){for(var e=this;e&&!e.matches(t);)e=e.parentElement;return e}}();var Mist;!function(t){var e=function(){function e(t){this.statement=t,this.emits={},this.obss={}}return e.customize=function(t,e){void 0===e&&(e={});var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles||!0,e.cancelable||!0,e.detail),n},e.prototype.add=function(t,e){this.obss[t]||(this.obss[t]=[]),this.obss[t].push(e),this.ready(t)},e.prototype.emit=function(t,e){for(var n in this.obss[t])this.obss[t][n](e)},e.prototype.remove=function(t,e){function n(){var t=i.indexOf(e);0>t||i.splice(t,1)}var i=this.obss[t];i&&e?n():i=null},e.prototype.ready=function(t){var e=this,n=this.emits;n[t]||document.addEventListener(t,n[t]=function(n){var i=n.target;i instanceof Element&&i.closest(e.selector())&&e.emit(t,n instanceof CustomEvent?n.detail:n)})},e.prototype.selector=function(){var e,n=this.statement;return e=n instanceof t.Statement?n.selector():n},e}();t.Emitter=e}(Mist||(Mist={}));var Mist;!function(t){var e=function(t){function e(e,n){t.call(this,function(t,i){e.add(n,function(e){try{t(e)}catch(n){i(n)}})}),this.emitter=e,this.name=n}return __extends(e,t),e}(t.Promise);t.Emission=e}(Mist||(Mist={}));var Mist;!function(Mist){function hycase(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}var Style=function(){function Style(t){var e=this;this.statement=t,this.value=new Mist.Value([{}]),this.value.when(function(n){var i=n.map(function(e){var n=[];for(var i in e)n.push(hycase(i)+":"+e[i]);return t.selector()+"{"+n.join(";")+"}"});e.create().innerHTML=i.join("")})}return Style.rem=function(){var t=document.body,e=getComputedStyle(t);return parseInt(e.fontSize,10)},Style.prototype.add=function(t,e){var n=this;return void 0===e&&(e=0),new Mist.Promise(function(i){var r=n,o=r.value.compose(function(n){var o=r.composer(t,e,e>0?{}:n[0]);if(e>0){n.push(o);var s=Mist.Frame.on(function(){return r.value.compose(function(t){var e=t.indexOf(o);return 0>e||t.splice(e,1),t})},e);s.then(i)}return n});e>0||o.then(i)})},Style.prototype.bind=function(name,responsor){var e=new RegExp(".*?\\/\\*\\**\\s*(.*?)\\{\\s*("+name+"\\S*)\\s*\\}(.*?)\\s*\\**\\*\\/"),s=this,r=responsor.when(function(v){return eval("var $$"+name+"=v"),s.value.compose(function(o){return o.map(function(p){function composer(match,p,v,s){var r=eval("$$"+v);return""+p+r+s+"/*"+p+"{"+v+"}"+s+"*/"}for(var name_3 in p)p[name_3]=p[name_3].replace(e,composer);return p})})});return r},Style.prototype.get=function(){var t={};return this.value.composite.forEach(function(e){for(var n in e)t[n]=e[n]}),t},Style.prototype.set=function(t){var e=this,n=e.value.compose(function(){return[e.composer(t)]});return n},Style.prototype.composer=function(t,e,n){function i(t,n){var i={};i[t]=n,r.add(i,e)}void 0===e&&(e=0),void 0===n&&(n={});var r=this;for(var o in t)t[o]instanceof Mist.Promise?t[o].when(i.bind(r,o)):n[o]=t[o];return n},Style.prototype.create=function(){if(!this.e){var t=document.createElement("style"),e=document.createTextNode("");t.appendChild(e),document.head.appendChild(t),this.e=t}return this.e},Style}();Mist.Style=Style}(Mist||(Mist={}));var Mist;!function(t){var e;!function(t){var e=function(){function t(t,e){this.src=t,this.prev=e,this.client={x:0,y:0},this.move={x:0,y:0},this.page={x:0,y:0},this.screen={x:0,y:0},t instanceof MouseEvent?this.mouse(t,e):t instanceof TouchEvent&&this.touch(t,e)}return t.prototype.mouse=function(t,e){var n=e,i=t,r=e?t.timeStamp-e.timeStamp:0,o=e?i.pageX-n.pageX:0,s=e?i.pageY-n.pageY:0,c=Math.sqrt(o*o+s*s);this.set(i,r,o,s,c)},t.prototype.set=function(t,e,n,i,r){this.client.x=t.clientX,this.client.y=t.clientY,this.move.x=n,this.move.y=i,this.mpms=e?r/e:0,this.page.x=t.pageX,this.page.y=t.pageY,this.passed=e,this.screen.x=t.screenX,this.screen.y=t.screenY,this.vector=r},t.prototype.touch=function(t,e){var n=e?e.changedTouches[0]:null,i=t.changedTouches[0],r=e?t.timeStamp-e.timeStamp:0,o=e?i.pageX-n.pageX:0,s=e?i.pageY-n.pageY:0,c=Math.sqrt(o*o+s*s);this.set(i,r,o,s,c)},t}();t.Detail=e}(e=t.Recognizer||(t.Recognizer={}))}(Mist||(Mist={}));var Mist;!function(t){var e;!function(e){function n(t){return t.preventDefault(),t}var i=function(){function i(t){this.emitter=t,this.end(),this.move(),this.start()}return i.prototype.end=function(){function i(t){var n=new e.Detail(t,r.txv);r.emitter.emit("pan",n),r.emitter.emit("panend",n),r.txd=!1,r.txv=t}var r=this;new t.Emission(t.Component.create(t.Emitter,"*"),"mouseup").when(i),new t.Emission(r.emitter,"touchend").when(n).when(i)},i.prototype.move=function(){function r(t){if(o.txd){var n=new e.Detail(t,o.txv),r=n.client.x,s=n.client.y;document.elementFromPoint(r,s)==n.src.target&&i.upper<n.vector&&(o.emitter.emit("pan",n),o.emitter.emit("panmove",n),n.move.x<0&&o.emitter.emit("panleft",n),n.move.x>0&&o.emitter.emit("panright",n),n.move.y<0&&o.emitter.emit("panup",n),n.move.y>0&&o.emitter.emit("pandown",n),o.txv=t)}}var o=this;new t.Emission(o.emitter,"mousemove").when(r),new t.Emission(o.emitter,"touchmove").when(n).when(r)},i.prototype.start=function(){function i(t){var n=new e.Detail(t);r.emitter.emit("pan",n),r.emitter.emit("panstart",n),r.txd=!0,r.txv=t}var r=this;new t.Emission(r.emitter,"mousedown").when(i),new t.Emission(r.emitter,"touchstart").when(n).when(i)},i.upper=10,i}();e.Pan=i}(e=t.Recognizer||(t.Recognizer={}))}(Mist||(Mist={}));var Mist;!function(t){var e;!function(e){var n=function(){function e(n){this.emitter=n,new t.Emission(n,"panend").when(function(t){var i=e.mpms/Math.SQRT2,r=e.mpms;r<t.mpms&&(n.emit("swipe",t),i<Math.sqrt(t.move.x*t.move.x)/t.passed&&(t.move.x<0&&n.emit("swipeleft",t),t.move.x>0&&n.emit("swiperight",t)),i<Math.sqrt(t.move.y*t.move.y)/t.passed&&(t.move.y<0&&n.emit("swipeup",t),t.move.y>0&&n.emit("swipedown",t)))})}return e.mpms=.65,e}();e.Swipe=n}(e=t.Recognizer||(t.Recognizer={}))}(Mist||(Mist={}));var Mist;!function(t){function e(t){return t.id?"#"+t.id:function(){var e;return t.hasAttribute("mid")&&(e='[mid="'+t.getAttribute("mid")+'"]'),e}()||function(){var e=i++;return t.setAttribute("mid",""+e),'[mid="'+e+'"]'}()}var n=function(){function n(e){this.statement=e,this["class"]=new t.Class(this),this.emitter=new t.Emitter(this),this.style=new t.Style(this),new t.Recognizer.Pan(this.emitter),new t.Recognizer.Swipe(this.emitter)}return n.prototype.concat=function(e){var i=this.selector(),r=i.split(",").map(function(t){return t.trim()+e});return t.Component.create(n,r.join())},n.prototype.each=function(t){this.elements().forEach(t)},n.prototype.elements=function(){var t,e=this.statement;return t=e instanceof Element?[e]:e instanceof n?e.elements():[].map.call(document.querySelectorAll(e),function(t){return t})},n.prototype.first=function(){var t,e=this.statement;return t=e instanceof Element?e:e instanceof n?e.first():document.querySelector(e)},n.prototype.last=function(){var t,e=this.statement;return t=e instanceof Element?e:e instanceof n?e.last():document.querySelector(e.match(/[^,]*$/).concat("last-child").join(":"))},n.prototype.on=function(e){return new t.Emission(this.emitter,e)},n.prototype.once=function(e){return t.Component.create(t.Emission,this.emitter,e)},n.prototype.selector=function(){var t,i=this.statement;return t=i instanceof Element?e(i):i instanceof n?i.selector():i},n}();t.Statement=n;var i=0}(Mist||(Mist={}));