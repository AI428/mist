/*!
 * @copyright AI428
 * @description Modular CSS in JS
 * @license http://opensource.org/licenses/MIT
 * @namespace Mist
 * @version 0.7.0
 */
function mist(t){return Mist.Component.create(Mist.Statement,t)}var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Mist;!function(t){function e(t){return JSON.stringify(t.map(function(t){return t instanceof Object?t.sessions||(t.sessions=i++):t}))}var n=function(){function t(){}return t.create=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=e([t]),r=e(n);return this.responses[o]||(this.responses[o]={}),this.responses[o][r]||(this.responses[o][r]=new(t.bind.apply(t,[t].concat([].slice.apply(n))))),this.responses[o][r]},t.responses={},t}();t.Component=n;var i=0}(Mist||(Mist={})),function(){var t=Element.prototype;t.matches=t.matches||t.mozMatchesSelector||t.msMatchesSelector||t.webkitMatchesSelector}(),function(){var t=Element.prototype;t.closest=t.closest||function(t){for(var e=this;e&&!e.matches(t);)e=e.parentElement;return e}}();var Mist;!function(t){var e;!function(t){var e=function(){function t(t){this.event=t,this.move={x:0,y:0},this.mpms=0,this.passed=0;var e,n=this;t instanceof MouseEvent?e=t:t instanceof TouchEvent&&(e=t.changedTouches[0]),n.set(e)}return t.prototype.diff=function(e){var n=this,i=new t(e),o=e.timeStamp-n.event.timeStamp;i.passed=o;var r=i.page.x-n.page.x,s=i.page.y-n.page.y;return i.move={x:r,y:s},i.mpms=o?Math.sqrt(r*r+s*s)/o:0,i},t.prototype.measure=function(t){var e=t.getBoundingClientRect(),n=this.client.x-e.left,i=this.client.y-e.top;return{x:n,y:i}},t.prototype.set=function(t){this.client={x:t.clientX,y:t.clientY},this.page={x:t.pageX,y:t.pageY}},t}();t.Summary=e}(e=t.Recognizer||(t.Recognizer={}))}(Mist||(Mist={}));var Mist;!function(t){var e;!function(e){var n=function(){function e(t){this.emitter=t,this.end(),this.move()}return e.prototype.end=function(){var n=this;new t.Emission(n.emitter,"panend").when(function(t){if(n.sess){var i=n.prev.diff(t.event);if(e.passed>i.passed){n.emitter.emit("swipe",i);var o=i.move.x*i.move.x,r=i.move.y*i.move.y;o<r?(i.move.y<0&&n.emitter.emit("swipeup",i),i.move.y>0&&n.emitter.emit("swipedown",i)):(i.move.x<0&&n.emitter.emit("swipeleft",i),i.move.x>0&&n.emitter.emit("swiperight",i))}n.sess=!1}})},e.prototype.move=function(){var n=this;new t.Emission(n.emitter,"panmove").when(function(t){n.sess||e.mpms<t.mpms&&(n.prev=t,n.sess=!0)})},e.mpms=.8,e.passed=64,e}();e.Swipe=n}(e=t.Recognizer||(t.Recognizer={}))}(Mist||(Mist={}));var Mist;!function(t){var e;!function(t){var e=function(){function t(t){this.component$=t;var e=this,n=function(n){t[n]instanceof Function?e[n]=function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return e.compose$(t[n].bind(t),i)}:Object.defineProperty(e,n,{get:e.accessor$.bind(e,t[n])})};for(var i in t)n(i)}return t.prototype.accessor$=function(t){return t},t.prototype.compose$=function(t,e){return t.apply(t,e)},t}();t.Voker=e}(e=t.Wrapper||(t.Wrapper={}))}(Mist||(Mist={}));var Mist;!function(t){var e;!function(t){var e=function(t){function e(e,n){t.call(this,e),this.name$=n}return __extends(e,t),e.prototype.next=function(t){var e=this.name$,n=this.component$.scene;return n.connect(e,t.name$),t},e.prototype.prev=function(t){return t.next(this)},e.prototype.accessor$=function(t){return this.proceed(),t},e.prototype.compose$=function(t,e){return this.proceed(),t.apply(t,e)},e.prototype.proceed=function(){var t=this.name$,e=this.component$.scene;if(!e.pos)throw new Error("Forbidden, story has not started yet");if(!e.move(t))throw new Error('Forbidden, "'+e.pos+'" > "'+t+'" story')},e}(t.Voker);t.Story=e}(e=t.Wrapper||(t.Wrapper={}))}(Mist||(Mist={}));var Mist;!function(t){var e=function(){function t(t){this.statement=t,this.conns={}}return t.prototype.connect=function(t,e){this.conns[t]||(this.conns[t]={}),this.conns[t][e]=e},t.prototype.end=function(){this.pos=null},t.prototype.move=function(t){var e=!1,n=this,i=n.conns[n.pos]||{};return n.pos==t?e=!0:i[t]&&(e=!0,n.pos=t),e},t.prototype.start=function(t){this.pos=t},t}();t.Scene=e}(Mist||(Mist={}));var Mist;!function(t){var e=function(){function t(t){var e=this.succeed,n=this.erred;this.resume(),t(e.bind(this),n.bind(this))}return t.all=function(e){return new t(function(t,n){function i(e){if(r.push(e)>o){try{t(r)}catch(i){n(i)}r=[]}}var o,r=[];e.map(function(t,e){t.when(i),o=e})})},t.race=function(e){return new t(function(t,n){e.forEach(function(e){e.when(function(e){try{t(e)}catch(i){n(i)}})})})},t.prototype["catch"]=function(e){var n=this;return new t(function(t,i){n.err=function(n){try{t(e(n))}catch(o){i(o)}},n.tx()})},t.prototype.resume=function(){this.txd=!1,this.txr=null},t.prototype.then=function(e,n){var i=this;return new t(function(t,o){i.err=o,i.success=function(i){try{t(e(i))}catch(r){n?t(n(r)):o(r)}},i.tx()})},t.prototype.when=function(t,e){var n=this,i=function(e){var i=t(e);return n.resume(),i},o=e?function(t){var i=e(t);return n.resume(),i}:e;return this.then(i,o)},t.prototype.erred=function(e){var n=this;this.txd||(this.err?(this.txd=!0,e instanceof t?e.when(this.err):this.err(e)):this.txr=function(){n.erred(e)}),console.log(e)},t.prototype.succeed=function(e){var n=this;this.txd||(this.success?(this.txd=!0,e instanceof t?e.when(this.success):this.success(e)):this.txr=function(){n.succeed(e)})},t.prototype.tx=function(){var t;(t=this.txr)&&t()},t}();t.Promise=e}(Mist||(Mist={}));var Mist;!function(t){var e;!function(e){var n=function(e){function n(t,n){void 0===n&&(n=0),e.call(this,t),this.dur$=n,this.id$=0}return __extends(n,e),n.prototype.stop=function(){clearTimeout(this.id$)},n.prototype.compose$=function(e,n){var i=this;return i.stop(),new t.Promise(function(t,o){function r(){try{t(e.apply(e,n)),!i.dur$||(i.id$=setTimeout(r,i.dur$))}catch(s){o(s)}}i.id$=setTimeout(r,i.dur$)})},n}(e.Voker);e.Pulser=n}(e=t.Wrapper||(t.Wrapper={}))}(Mist||(Mist={}));var Mist;!function(t){var e;!function(e){var n=function(e){function n(t,n){void 0===n&&(n=0),e.call(this,t),this.dur$=n,this.id$=0}return __extends(n,e),n.prototype.stop=function(){clearTimeout(this.id$)},n.prototype.compose$=function(e,n){var i=this;return i.stop(),new t.Promise(function(t,o){function r(){try{t(e.apply(e,n))}catch(i){o(i)}}i.id$=setTimeout(r,i.dur$)})},n}(e.Voker);e.Timer=n}(e=t.Wrapper||(t.Wrapper={}))}(Mist||(Mist={}));var Mist;!function(t){var e=function(){function t(){}return t.at=function(t){this.txs.push(t),this.tx()},t.tx=function(){var t=this;this.txd||function(){t.txd=!0;var e=t,n=[];!function i(){for(var t,o=0;t=n.shift();)t();for(;t=e.txs.shift();)o=n.push(t);e.txd=o>0,e.txd&&requestAnimationFrame(i)}()}()},t.txs=[],t}();t.Frame=e}(Mist||(Mist={}));var Mist;!function(t){var e=function(e){function n(n){var i=this;e.call(this,function(e,n){i.xr=function(){i.xd||function(){i.xd=!0,t.Frame.at(function(){var t;try{e(i.composite)}catch(o){n(o)}for(;t=i.xs.shift();)t(i.composite);i.xd=!1})}()}}),this.composite=n,this.xs=[]}return __extends(n,e),n.prototype.compose=function(e){var n=this;return new t.Promise(function(i){t.Frame.at(function(){n.composite=e(n.composite),n.xs.push(i),n.xr()})})},n}(t.Promise);t.Value=e}(Mist||(Mist={}));var Mist;!function(t){function e(t){for(var e={},n=0,i=t;n<i.length;n++){var o=i[n];for(var r in o)e[r]=o[r]}return e}function n(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}var i=function(){function i(e){var i=this;this.statement=e,this.value=new t.Value({}),this.value.when(function(t){var o=[];for(var r in t)o.push(n(r)+":"+t[r]);i.create().innerHTML=e.selector()+"{"+o.join(";")+"}"})}return i.prototype.add=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i-0]=arguments[i];return this.value.compose(function(i){return t.compose(e(n),i)}).then(function(){return t})},i.prototype.get=function(){var t={},e=this;for(var n in e.value.composite)t[n]=e.value.composite[n];return t},i.prototype.pulse=function(e){return t.Component.create(t.Wrapper.Pulser,this,e)},i.prototype.set=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i-0]=arguments[i];return this.value.compose(function(){return t.compose(e(n))}).then(function(){return t})},i.prototype.time=function(e){return t.Component.create(t.Wrapper.Timer,this,e)},i.prototype.compose=function(t,e){void 0===e&&(e={});for(var n in t){var i=t[n];i instanceof Function?e[n]=i():e[n]=i}return e},i.prototype.create=function(){if(!this.e){var t=document.createElement("style"),e=document.createTextNode("");t.appendChild(e),document.head.appendChild(t),this.e=t}return this.e},i}();t.Style=i}(Mist||(Mist={}));var Mist;!function(t){function e(t){return t.id?"#"+t.id:function(){var e;return t.hasAttribute("mid")&&(e='[mid="'+t.getAttribute("mid")+'"]'),e}()||function(){var e=i++;return t.setAttribute("mid",""+e),'[mid="'+e+'"]'}()}var n=function(){function n(e){this.statement=e,this.emitter=new t.Emitter(this),this.scene=new t.Scene(this),this.style=new t.Style(this),new t.Recognizer.Pan(this.emitter),new t.Recognizer.Swipe(this.emitter)}return n.prototype.a=function(){var t,e=this.statement;return t=e instanceof Element?e:document.querySelector(e)},n.prototype.any=function(e){return t.Component.create(n,this.selector().split(",").map(function(t){return e.split(",").map(function(e){return t.trim()+e.trim()}).join()}).join())},n.prototype.elements=function(){var t,e=this.statement;return t=e instanceof Element?[e]:[].map.call(document.querySelectorAll(e),function(t){return t})},n.prototype.last=function(){var t,e=this.statement;return t=e instanceof Element?e:document.querySelector(e.match(/[^,]*$/).concat("last-of-type").join(":"))},n.prototype.not=function(t){return this.any(t.split(",").map(function(t){return":not("+t.trim()+")"}).join())},n.prototype.on=function(e){return new t.Emission(this.emitter,e)},n.prototype.selector=function(){var t,n=this.statement;return t=n instanceof Element?e(n):n},n.prototype.story=function(e){return t.Component.create(t.Wrapper.Story,this,e)},n.prototype.th=function(t,e){for(var i=[],o=t;o<=e;o++)i.push(this.any(n.nth+"("+o+")"));return i},n.nth=":nth-of-type",n}();t.Statement=n;var i=0}(Mist||(Mist={}));var Mist;!function(t){var e=function(){function e(t){this.statement=t,this.emits={},this.obss={}}return e.customize=function(t,e){void 0===e&&(e={});var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles||!0,e.cancelable||!0,e.detail),n},e.prototype.add=function(t,e){this.obss[t]||(this.obss[t]=[]),this.obss[t].push(e),this.on(t)},e.prototype.emit=function(t,e){for(var n in this.obss[t])this.obss[t][n](e)},e.prototype.remove=function(t,e){function n(){var t=i.indexOf(e);t<0||i.splice(t,1)}var i=this.obss[t];i&&e?n():i=null},e.prototype.on=function(t){var e=this,n=this.emits;n[t]||document.addEventListener(t,n[t]=function(n){var i=n.target;i instanceof Element&&i.closest(e.selector())&&e.emit(t,n instanceof CustomEvent?n.detail:n)})},e.prototype.selector=function(){var e,n=this.statement;return e=n instanceof t.Statement?n.selector():n},e}();t.Emitter=e}(Mist||(Mist={}));var Mist;!function(t){var e=function(t){function e(e,n){t.call(this,function(t,i){e.add(n,function(e){try{t(e)}catch(n){i(n)}})}),this.emitter=e,this.name=n}return __extends(e,t),e}(t.Promise);t.Emission=e}(Mist||(Mist={}));var Mist;!function(t){var e;!function(e){function n(t){return t.preventDefault(),t}var i=function(){function i(t){this.emitter=t,this.end(),this.move(),this.start()}return i.prototype.end=function(){function e(t){if(i.sess){var e=i.prev.diff(t);i.emitter.emit("pan",e),i.emitter.emit("panend",e),i.sess=!1}}var i=this;new t.Emission(t.Component.create(t.Emitter,"*"),"mouseup").when(e),new t.Emission(i.emitter,"touchend").when(n).when(e)},i.prototype.move=function(){function e(t){if(i.sess){var e=i.prev.diff(t);i.emitter.emit("panmove",e),e.move.x<0&&i.emitter.emit("panleft",e),e.move.x>0&&i.emitter.emit("panright",e),e.move.y<0&&i.emitter.emit("panup",e),e.move.y>0&&i.emitter.emit("pandown",e),i.prev=e}}var i=this;new t.Emission(i.emitter,"mousemove").when(e),new t.Emission(i.emitter,"touchmove").when(n).when(e)},i.prototype.start=function(){function i(t){var n=new e.Summary(t);o.emitter.emit("panstart",n),o.prev=n,o.sess=!0}var o=this;new t.Emission(o.emitter,"mousedown").when(i),new t.Emission(o.emitter,"touchstart").when(n).when(i)},i}();e.Pan=i}(e=t.Recognizer||(t.Recognizer={}))}(Mist||(Mist={}));