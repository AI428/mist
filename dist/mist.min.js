/*!
 * @copyright AI428
 * @description Motion Design in Modular CSS
 * @license http://opensource.org/licenses/MIT
 * @namespace Mist
 * @version 0.8.2
 */
function mist(t){return Mist.Component.create(Mist.Statement,t)}var __extends=this&&this.__extends||function(t,n){function e(){this.constructor=t}for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)},Mist;!function(t){function n(t){return JSON.stringify(t.map(function(t){return t instanceof Object?t.sessions||(t.sessions=r++):t}))}var e=function(){function t(){}return t.create=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var o=n([t]),i=n(e);return this.responses[o]||(this.responses[o]={}),this.responses[o][i]||(this.responses[o][i]=new(t.bind.apply(t,[t].concat([].slice.apply(e))))),this.responses[o][i]},t.responses={},t}();t.Component=e;var r=0}(Mist||(Mist={})),function(){var t=Element.prototype;t.matches=t.matches||t.mozMatchesSelector||t.msMatchesSelector||t.webkitMatchesSelector}(),function(){var t=Element.prototype;t.closest=t.closest||function(t){for(var n=this;n&&!n.matches(t);)n=n.parentElement;return n}}();var Mist;!function(t){var n=function(){function n(t){this.statement=t,this.emits={},this.obss={}}return n.customize=function(t,n){void 0===n&&(n={});var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,n.bubbles||!0,n.cancelable||!0,n.detail),e},n.prototype.add=function(t,n){this.obss[t]||(this.obss[t]=[]),this.obss[t].push(n),this.on(t)},n.prototype.emit=function(t,n){for(var e in this.obss[t])this.obss[t][e](n)},n.prototype.remove=function(t,n){function e(){var t=r.indexOf(n);t<0||r.splice(t,1)}var r=this.obss[t];r&&n?e():r=null},n.prototype.on=function(t){var n=this,e=this.emits;e[t]||document.addEventListener(t,e[t]=function(e){var r=e.target;r instanceof Element&&r.closest(n.selector())&&n.emit(t,e instanceof CustomEvent?e.detail:e)})},n.prototype.selector=function(){var n,e=this.statement;return n=e instanceof t.Statement?e.selector():e},n}();t.Emitter=n}(Mist||(Mist={}));var Mist;!function(t){var n=function(){function t(t){var n=this.succeed,e=this.erred;this.resume(),t(n.bind(this),e.bind(this))}return t.all=function(n){return new t(function(t,e){function r(n){if(i.push(n)>o){try{t(i)}catch(t){e(t)}i=[]}}var o,i=[];n.map(function(t,n){t.when(r),o=n})})},t.race=function(n){return new t(function(t,e){n.forEach(function(n){n.when(function(n){try{t(n)}catch(t){e(t)}})})})},t.prototype.catch=function(n){var e=this;return new t(function(t,r){e.err=function(e){try{t(n(e))}catch(t){r(t)}},e.tx()})},t.prototype.resume=function(){this.txd=!1,this.txr=null},t.prototype.then=function(n,e){var r=this;return new t(function(t,o){r.err=o,r.success=function(r){try{t(n(r))}catch(n){e?t(e(n)):o(n)}},r.tx()})},t.prototype.when=function(t,n){var e=this,r=function(n){var r=t(n);return e.resume(),r},o=n?function(t){var r=n(t);return e.resume(),r}:n;return this.then(r,o)},t.prototype.erred=function(n){var e=this;this.txd||(this.err?(this.txd=!0,n instanceof t?n.when(this.err):this.err(n)):this.txr=function(){e.erred(n)}),console.log(n)},t.prototype.succeed=function(n){var e=this;this.txd||(this.success?(this.txd=!0,n instanceof t?n.when(this.success):this.success(n)):this.txr=function(){e.succeed(n)})},t.prototype.tx=function(){var t;(t=this.txr)&&t()},t}();t.Promise=n}(Mist||(Mist={}));var Mist;!function(t){var n=function(t){function n(n,e){t.call(this,function(t,r){n.add(e,function(n){try{t(n)}catch(t){r(t)}})}),this.emitter=n,this.name=e}return __extends(n,t),n}(t.Promise);t.Emission=n}(Mist||(Mist={}));var Mist;!function(t){function n(t){for(var n={},e=0,r=t;e<r.length;e++){var o=r[e];for(var i in o)n[i]=o[i]}return n}function e(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}var r=function(){function r(t){this.statement=t,this.value={}}return r.prototype.clear=function(){this.value={},this.apply()},r.prototype.clearAll=function(){this.statement.elements().map(function(n){t.Component.create(t.Statement,n).style.clear()})},r.prototype.set=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=this.value,o=n(t);for(var i in o){var s=o[i];s instanceof Function?r[i]=s(r):r[i]=s}this.apply()},r.prototype.setAll=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var o=n(e);this.statement.elements().map(function(n,e,r){var i={};for(var s in o){var c=o[s];c instanceof Function?i[s]=c(n,e,r):i[s]=c}t.Component.create(t.Statement,n).style.set(i)})},r.prototype.apply=function(){var t=this.value,n=[];for(var r in t)n.push(e(r)+":"+t[r]);this.create().innerHTML=this.statement.selector()+"{"+n.join(";")+"}"},r.prototype.create=function(){if(!this.e){var t=document.createElement("style"),n=document.createTextNode("");t.appendChild(n),document.head.appendChild(t),this.e=t}return this.e},r}();t.Style=r}(Mist||(Mist={}));var Mist;!function(t){var n=function(){function t(t){this.statement=t,this.conns={}}return t.prototype.connect=function(t,n){this.conns[t]||(this.conns[t]={}),this.conns[t][n]=n},t.prototype.move=function(t){var n=!1,e=this,r=e.conns[e.pos]||{};return r[t]&&(e.pos=t,n=!0),n},t.prototype.start=function(t){this.pos=t},t}();t.Story=n}(Mist||(Mist={}));var Mist;!function(t){var n;!function(t){var n=function(){function t(t){this.component$=t;var n=this;for(var e in t)t[e]instanceof Function?n[e]=n.composer$.bind(n,e):Object.defineProperty(n,e,{get:n.accessor$.bind(n,e)})}return t.prototype.accessor$=function(t){return this.component$[t]},t.prototype.composer$=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=this.component$,o=this.component$[t];return o.apply(r,n)},t}();t.Voker=n}(n=t.Wrapper||(t.Wrapper={}))}(Mist||(Mist={}));var Mist;!function(t){var n;!function(n){var e=function(n){function e(e,r){n.call(this,e),this.name$=r,this.story$=t.Component.create(t.Story,e)}return __extends(e,n),e.prototype.move=function(t){var n=this.story$,e=this.name$,r=n.move(e);return r&&t(),r},e.prototype.next=function(t){var n=this.story$,e=this.name$;return n.connect(e,t.name$),t},e.prototype.prev=function(t){return t.next(this)},e.prototype.start=function(){var t=this.story$,n=this.name$;t.start(n)},e}(n.Voker);n.Story=e}(n=t.Wrapper||(t.Wrapper={}))}(Mist||(Mist={}));var Mist;!function(t){var n;!function(n){var e=function(e){function r(t,n){void 0===n&&(n=0),e.call(this,t),this.dur$=n,this.id$=0}return __extends(r,e),r.prototype.composer$=function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var i=this;return new n.Defer(i.component$,new t.Promise(function(t,n){function o(){try{t(c.apply(s,r))}catch(t){n(t)}}var s=i.component$,c=i.component$[e];clearTimeout(i.id$),i.id$=setTimeout(o,i.dur$)}))},r}(n.Voker);n.Timer=e}(n=t.Wrapper||(t.Wrapper={}))}(Mist||(Mist={}));var Mist;!function(t){function n(t){return t.id?"#"+t.id:function(){var n;return t.hasAttribute("mid")&&(n='[mid="'+t.getAttribute("mid")+'"]'),n}()||function(){var n=r++;return t.setAttribute("mid",""+n),'[mid="'+n+'"]'}()}var e=function(){function e(n){this.statement=n,this.emitter=new t.Emitter(this),this.style=new t.Style(this)}return e.prototype.any=function(n){return t.Component.create(e,this.selector().split(",").map(function(t){return n.split(",").map(function(n){return t.trim()+n.trim()}).join()}).join())},e.prototype.clear=function(){var t=this.style,n=this.style.clear;return n.apply(t),this},e.prototype.clearAll=function(){var t=this.style,n=this.style.clearAll;return n.apply(t),this},e.prototype.elements=function(){var t,n=this.statement;return t=n instanceof Element?[n]:[].map.call(document.querySelectorAll(n),function(t){return t})},e.prototype.not=function(t){return this.any(t.split(",").map(function(t){return":not("+t.trim()+")"}).join())},e.prototype.on=function(n){return new t.Emission(this.emitter,n)},e.prototype.selector=function(){var t,e=this.statement;return t=e instanceof Element?n(e):e},e.prototype.set=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var e=this.style,r=this.style.set;return r.apply(e,t),this},e.prototype.setAll=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var e=this.style,r=this.style.setAll;return r.apply(e,t),this},e.prototype.story=function(n){return t.Component.create(t.Wrapper.Story,this,n)},e.prototype.time=function(n){return t.Component.create(t.Wrapper.Timer,this,n)},e}();t.Statement=e;var r=0}(Mist||(Mist={}));var Mist;!function(t){var n;!function(t){var n=function(n){function e(t,e){n.call(this,t),this.commit$=e}return __extends(e,n),e.prototype.catch=function(t){return new e(this.component$,this.commit$.catch(t))},e.prototype.composer$=function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var i=this;return new e(i.component$,i.commit$.when(function(o){var s;return s=o instanceof t.Voker?o[n].apply(o,r):i.component$[n].apply(i.component$,r),s instanceof e?s.commit$:s}))},e}(t.Voker);t.Defer=n}(n=t.Wrapper||(t.Wrapper={}))}(Mist||(Mist={}));